{
  "version": 3,
  "sources": ["../app/src/extension/content.js"],
  "sourcesContent": ["// --- Constants ---\nconst toastId = 'injector-toast-display';\n\nconst handleSelect = async (options) => {\n  let {text,mode} = options||{};\n  if(!text){\n    const selection = window.getSelection();\n    text = selection.toString(); // The actual text that is selected\n  }\n  if(!text){\n    return\n  }\n\n  const apiUrl = \"https://api.cicy.de5.net/t\";\n\n\n  let input\n  if(mode === 1){\n\n    input = `Please correct the following English expression.\": \n--------\n${text}\n--------\n\nRespond ONLY in valid JSON with the single key \"text\" and nothing else.`\n    showToast(\"\u7EA0\u6B63\u4E2D...\")\n  }else{\n    showToast(\"\u7FFB\u8BD1\u4E2D...\")\n    input = `Translate the sentence below: \n--------\n${text}\n--------\n     into Chinese.\nRespond ONLY in valid JSON with the single key \"text\" and nothing else.`\n\n  }\n  const requestBody = {\n    input\n  }\n\n  try {\n    const response = await fetch(apiUrl, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(requestBody)\n    });\n\n    const result = await response.json();\n\n    console.log(\"Full API response:\", result);\n    const messageItem = result.output.find(item => item.type === \"message\");\n    if (!messageItem) return { error: \"No message in response\" };\n    const outputText = messageItem.content[0].text;\n    const res =JSON.parse(outputText)\n    console.log(\"Output text:\",res.text);\n\n    if(mode === 1){\n      navigator.clipboard.writeText(res.text)\n          .then(() => {\n            console.log(\"Copied to clipboard!\");\n\n          })\n          .catch((err) => {\n            console.error(\"Failed to copy: \", err);\n          });\n      showToast(res.text,{timeout:10})\n    }else{\n      showToast(res.text,{timeout:4})\n    }\n\n  } catch (err) {\n    showToast(err,true)\n    console.error(\"Error calling worker:\", err);\n  }\n\n};\n\n// --- UI Feedback (Toast) ---\n\nconst showToast = (msg, options) => {\n  const {isError,timeout} = options||{}\n  const existing = document.getElementById(toastId);\n  if (existing) existing.remove();\n\n  const div = document.createElement('div');\n  div.id = toastId;\n  div.textContent = msg;\n  div.style.cssText = `\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    padding: 10px 20px;\n    background: ${isError ? '#ff4444' : '#222'};\n    color: white;\n    border-radius: 4px;\n    z-index: 2147483647;\n    font-family: sans-serif;\n    font-size: 14px;\n    box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n    transition: opacity 0.3s ease;\n    pointer-events: none;\n  `;\n  document.body.appendChild(div);\n\n  setTimeout(() => {\n    div.style.opacity = '0';\n    setTimeout(() => div.remove(), 300);\n  }, timeout*1000||2000);\n};\n\n// --- Event Listeners ---\n\n// 1. Auto Inject on Page Load\nwindow.addEventListener('load', () => {\n  console.log(\"load\")\n});\n\n// 2. Hot Reload Shortcut (Cmd+I / Ctrl+I)\ndocument.addEventListener('keydown', async (e) => {\n  if ((e.metaKey || e.ctrlKey) && e.key.toLowerCase() === 'i') {\n    e.preventDefault();\n    handleSelect();\n  }\n  if ((e.metaKey || e.ctrlKey) && e.key.toLowerCase() === 'u') {\n    e.preventDefault();\n    handleSelect({\n      mode:1\n    });\n  }\n  // Cmd/Ctrl + Shift + P\n  if ((e.metaKey || e.ctrlKey) && e.shiftKey) {\n    if( e.key.toLowerCase() === 'p'){\n      chrome.runtime.sendMessage({\n        type: \"copy-domain-cookies\"\n      });\n    }\n    if( e.key.toLowerCase() === 'l'){\n      chrome.runtime.sendMessage({\n        type: \"open-in-electron\"\n      });\n    }\n\n    e.preventDefault();\n  }\n});\n\n// 3. Listen for Context Menu Trigger\nif(chrome && chrome.runtime){\n  chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\n    if (message.type === \"copyTgAuth\") {\n      let res = \"\"\n      for (let i = 0; i < Object.keys(localStorage).length; i++) {\n        const k = Object.keys(localStorage)[i]\n        const v =  localStorage.getItem(k)\n        res += `localStorage.setItem(\"${k}\",\\`${v}\\`);\\n`\n      }\n      console.log(res)\n\n      navigator.clipboard.writeText(res)\n          .then(() => {\n            showToast(`localStorage copied`, { timeout: 4 });\n          })\n          .catch(() => {\n            showToast(\"localStorage write failed\", { isError: true, timeout: 4 });\n          });\n    }\n    if (message.type === \"copy-domain-cookies\") {\n      console.log(\"copy-domain-cookies\",message.domain,message.payload)\n      navigator.clipboard.writeText(JSON.stringify(message.payload))\n          .then(() => {\n            showToast(`Cookies copied for: ${message.domain}`, { timeout: 4 });\n          })\n          .catch(() => {\n            showToast(\"Clipboard write failed\", { isError: true, timeout: 4 });\n          });\n    }\n  });\n}"],
  "mappings": "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",
  "names": []
}
